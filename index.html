<!doctype html>
<html lang="bn">
<head>
  <meta charset="utf-8" />
  <!-- keep viewport but don't disable user zoom for accessibility -->
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>কার্টুন দাবা — Responsive Realistic Pieces (Multiplayer ready)</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
<div class="wrap">
  <div class="panel" role="region" aria-label="Chess game panel">
    <div class="header">
      <div style="display:flex;gap:14px;align-items:center">
        <div class="title">কার্টুন দাবা — Responsive & Real Pieces</div>
        <div class="timers" aria-hidden="false" title="Timers">
          <div id="timerWhiteBox" class="timerBox running">
            <div class="timerLabel">White</div>
            <div id="timerWhite" class="timerVal">10:00</div>
          </div>
          <div id="timerBlackBox" class="timerBox">
            <div class="timerLabel">Black</div>
            <div id="timerBlack" class="timerVal">10:00</div>
          </div>
        </div>
      </div>

      <!-- Multiplayer controls (added) -->
      <div class="multiplayer" style="margin-top:10px;display:flex;gap:8px;align-items:center;flex-wrap:wrap">
        <div aria-live="polite" style="display:flex;gap:8px;align-items:center">
          <label for="your-id" style="font-weight:600">Your ID:</label>
          <div id="your-id" role="status" aria-atomic="true" style="min-width:140px;padding:6px 8px;border-radius:8px;background:rgba(255,255,255,0.03);">—</div>
          <button id="copyIdBtn" title="Copy your ID">Copy</button>
        </div>

        <div style="display:flex;gap:6px;align-items:center">
          <label for="peer-id-input">Connect to ID:</label>
          <input id="peer-id-input" placeholder="Enter peer ID" aria-label="Peer ID input" style="min-width:180px;padding:6px 8px;border-radius:6px;border:1px solid rgba(255,255,255,0.06)" />
          <button id="connect-btn" class="primary">Connect</button>
          <button id="disconnect-btn" style="display:none">Disconnect</button>
        </div>

        <div id="connStatus" style="margin-left:8px;min-width:220px" aria-live="polite">Status: Not connected</div>
      </div>
      <!-- end multiplayer controls -->

      <div class="controls" role="toolbar" aria-label="game controls">
        <button id="undo">Undo</button>
        <button id="restart">Restart</button>
        <button class="primary" id="toggleHints">Hints: ON</button>
        <button id="toggleAI" class="compactBtn">AI: OFF</button>
        <select id="aiColorSelect" aria-label="AI color select" style="display:inline-block">
          <option value="b">AI কালো</option>
          <option value="w">AI সাদা</option>
        </select>
        <button id="toggleSides" class="sideToggle">Show Sidebars</button>
      </div>
    </div>

    <div class="board-wrap">
      <div class="side" id="sideLeft" aria-hidden="false">
        <h4>White captured</h4>
        <div id="captured-white" class="captured" aria-label="white captures"></div>
        <div style="height:8px"></div>
        <div class="meta">
          <div>Turn: <strong id="turnLabel">White</strong></div>
          <div>Move#: <strong id="moveCount">1</strong></div>
        </div>
      </div>

      <div style="display:flex;flex-direction:column;align-items:center;gap:8px">
        <!-- Captured mobile (top) - intended to show "Black captured" for the top player -->
        <div id="capturedBottomMobile" class="captured-mobile" aria-hidden="true" aria-label="Bottom player captures (mobile)">
          <div class="label">White captured (নীচের প্লেয়ারের নিচে)</div>
          <div id="capturedBottomRow" class="row" style="justify-content:center"></div>
        </div>

        <div id="board" class="board" role="application" aria-label="Chess board">
          <div id="grid" class="grid" aria-live="polite"></div>
        </div>

        <!-- Captured mobile (bottom) - intended to show "White captured" for the bottom player -->
        
        <div id="capturedTopMobile" class="captured-mobile" aria-hidden="true" aria-label="Top player captures (mobile)">
          <div class="label">Black captured (উপরের প্লেয়ারের নিচে)</div>
          <div id="capturedTopRow" class="row" style="justify-content:center"></div>
        </div>

        <!-- Captured strip (fallback / tablet) -->
        <div id="capturedStrip" class="captured-strip" aria-hidden="false">
          <div class="half" id="capturedStripLeft">
            <div class="label">White captured</div>
            <div id="capturedStripWhitePreview" style="display:flex;gap:6px;align-items:center"></div>
            <div class="badge" id="capturedStripWhiteCount">0</div>
          </div>
          <div class="half" id="capturedStripRight" style="justify-content:flex-end">
            <div class="label">Black captured</div>
            <div id="capturedStripBlackPreview" style="display:flex;gap:6px;align-items:center"></div>
            <div class="badge" id="capturedStripBlackCount">0</div>
          </div>
        </div>
      </div>

      <div class="side" id="sideRight" aria-hidden="false">
        <h4>Black captured</h4>
        <div id="captured-black" class="captured" aria-label="black captures"></div>
        <div style="height:8px"></div>
        <div class="log" id="logArea" aria-live="polite"></div>
      </div>
    </div>

  </div>
</div>

<!-- Winner modal -->
  <div id="winnerModal" aria-hidden="true">
    <div style="position:absolute;inset:0;background:linear-gradient(180deg,rgba(3,7,18,0.6),rgba(2,6,23,0.85));backdrop-filter:blur(6px);"></div>
    <div class="modalBox">
      <h2 id="winnerText" style="margin:6px 0 10px 0;font-size:20px;">অভিনন্দন!</h2>
      <p id="winnerSub" style="margin:0 0 18px 0;opacity:0.9">খুব সুন্দর — আপনি জিতেছেন। একটা আরেকটি গেম খেলবেন?</p>
      <div style="display:flex;gap:10px;justify-content:center;">
        <button id="playAgainBtn" class="primary" style="padding:10px 16px;border-radius:10px;">আরেকটি গেম খেলুন</button>
        <button id="closeModalBtn" style="padding:10px 16px;border-radius:10px;border:1px solid rgba(255,255,255,0.06);">বাতিল</button>
      </div>
    </div>
  </div>

<!-- Promotion modal -->
<div id="promoModal" class="promoModal" role="dialog" aria-modal="true">
  <div class="promoBox">
    <h3 id="promoTitle">Pawn promoted! কোন পিস নেবেন?</h3>
    <div class="promoGrid">
      <button class="promoBtn" data-piece="q">Queen</button>
      <button class="promoBtn" data-piece="r">Rook</button>
      <button class="promoBtn" data-piece="b">Bishop</button>
      <button class="promoBtn" data-piece="n">Knight</button>
    </div>
  </div>
</div>

<!-- socket.io client (only include if you use a Socket.IO server) -->
<script src="/socket.io/socket.io.js"></script>

<!-- main game script -->
<script src="script.js"></script>

</body>
</html>