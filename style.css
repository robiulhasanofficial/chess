:root{
  --board-size: clamp(240px, 92vmin, 720px);
  --cell-gap: clamp(2px, 0.6vmin, 6px);
  --light-piece: #f4ecd8;
  --dark-piece: #2f2216;
  --light-square: linear-gradient(180deg,#f7f0de 0%, #ecdcb9 100%);
  --dark-square: linear-gradient(180deg,#7f5a44 0%, #5b3f2d 100%);
  --accent: #ff7b8a;
  --bg: linear-gradient(180deg,#071024 0%, #06101a 60%);
  --card-bg: rgba(255,255,255,0.02);
  --glass: rgba(255,255,255,0.04);
  --ui-radius: 12px;
  --ui-padding: 12px;
}

/* --- Base reset --- */
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family: "Noto Sans Bengali", Inter, system-ui, -apple-system, sans-serif;background:var(--bg);color:#eef2ff;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;overflow-x:hidden}
.wrap{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:18px}

/* --- Panel --- */
.panel{width:100%;max-width:1200px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:14px;border-radius:16px;box-shadow:0 12px 40px rgba(0,0,0,0.6)}
.header{display:flex;align-items:center;justify-content:space-between;gap:8px;margin-bottom:12px}
.title{font-weight:700;font-size:18px;display:flex;align-items:center;gap:10px}
.controls{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
button, select{background:var(--card-bg);color:#fff;border:1px solid rgba(255,255,255,0.04);padding:8px 10px;border-radius:10px;cursor:pointer;font-weight:600}
button.primary{background:linear-gradient(90deg,#ffb86b,#ff7b8a);color:#09101a;border:none}

/* Timer badges */
.timers {display:flex; gap:8px; align-items:center;}
.timerBox {display:flex; flex-direction:column; align-items:center; padding:6px 10px; border-radius:10px; background:rgba(255,255,255,0.02); min-width:88px;}
.timerLabel{font-size:12px; opacity:0.9;}
.timerVal{font-weight:800; font-size:16px;}
.running { box-shadow: 0 6px 18px rgba(0,0,0,0.45) inset, 0 6px 18px rgba(255,255,255,0.02); background: linear-gradient(90deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.06); }

/* --- board area layout --- */
.board-wrap{display:flex;gap:16px;align-items:flex-start;justify-content:center}
/* on tiny devices stack vertically */
@media (max-width:980px){ .board-wrap{flex-direction:column;align-items:center} }

/* sidebars (captured + meta) */
.side{flex:0 0 220px;background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);padding:12px;border-radius:12px;min-width:0}
.side h4{margin:0 0 8px 0;font-size:13px}
.captured{min-height:120px;display:flex;flex-wrap:wrap;gap:8px;padding:6px;border-radius:8px;background:var(--card-bg);overflow:auto}
.small-piece{width:48px;height:48px;border-radius:8px;padding:4px;background:rgba(255,255,255,0.015);display:flex;align-items:center;justify-content:center;flex-shrink:0}

/* main board container */
.board{width:var(--board-size);max-width:100%;aspect-ratio:1/1;height:auto;position:relative;border-radius:12px;overflow:hidden;padding:10px;background:linear-gradient(180deg,#17202b,#0f1620);box-shadow:inset 0 10px 36px rgba(0,0,0,0.6);flex:0 0 auto}

.grid{width:100%;height:100%;display:grid;grid-template-columns:repeat(8,1fr);grid-template-rows:repeat(8,1fr);grid-auto-rows:1fr;gap:var(--cell-gap);position:relative;touch-action:none}

.cell{position:relative;border-radius:8px;display:flex;align-items:center;justify-content:center;overflow:visible;min-width:0;min-height:0}
.cell.light{background:var(--light-square);box-shadow:inset 0 -6px 10px rgba(255,255,255,0.06)}
.cell.dark{background:var(--dark-square);box-shadow:inset 0 -6px 10px rgba(0,0,0,0.45)}

/* coordinates â€” hide on tiny screens */
.coords{position:absolute;left:6px;bottom:6px;font-size:11px;color:rgba(255,255,255,0.42);pointer-events:none}
@media (max-width:420px){ .coords{display:none} }

/* piece style & scaling */
.piece{width:78%;height:78%;display:flex;align-items:center;justify-content:center;cursor:pointer;user-select:none;transition:transform 180ms cubic-bezier(.2,.9,.2,1), box-shadow 140ms;will-change:transform}
.piece:active{transform:scale(0.98)}
/* make hit area slightly larger on mobile */
@media (max-width:520px){ .piece{width:86%;height:86%} .small-piece{width:40px;height:40px} }

.piece .svgwrap{width:100%;height:100%;display:block}

.cell.highlight{outline:3px solid rgba(255,255,255,0.06);box-shadow:0 8px 28px rgba(0,0,0,0.55) inset}
.cell.move-target::after{content:'';position:absolute;width:18px;height:18px;border-radius:50%;background:rgba(255,255,255,0.75);opacity:0.92;transform:translateY(-2px)}
.cell.capture-target::after{content:'';position:absolute;left:6px;top:6px;right:6px;bottom:6px;border-radius:8px;border:3px dashed rgba(255,100,100,0.92)}
.cell.check{box-shadow:0 0 0 4px rgba(255,50,50,0.26) inset}

.flying{position:absolute;will-change:transform,opacity;pointer-events:none}

.meta{margin-top:10px;display:flex;justify-content:space-between;align-items:center;gap:8px}
.log{max-height:140px;overflow:auto;padding:8px;background:rgba(255,255,255,0.02);border-radius:8px;font-size:13px}

.promoModal{display:none;position:fixed;inset:0;align-items:center;justify-content:center;z-index:14000}
.promoBox{position:relative;max-width:420px;width:92%;margin:auto;background:linear-gradient(180deg,#0b1220,#081021);padding:18px;border-radius:14px;box-shadow:0 12px 40px rgba(2,6,23,0.7);color:#fff;z-index:14001;text-align:center}
.promoGrid{display:flex;gap:8px;justify-content:center;margin-top:12px}

#winnerModal{display:none;position:fixed;inset:0;align-items:center;justify-content:center;z-index:12000}
#winnerModal .modalBox{position:relative;max-width:520px;width:92%;margin:auto;background:linear-gradient(180deg,#0b1220,#081021);padding:18px;border-radius:14px;box-shadow:0 12px 40px rgba(2,6,23,0.7);color:#fff;z-index:12001;text-align:center}

/* small-screen: hide sidebars by default and add toggles */
@media (max-width:640px){
  .side{display:none}
  .controls .sideToggle{display:inline-flex}
}
.controls .sideToggle{display:none}
.controls .compactBtn{display:inline-flex;align-items:center;gap:6px}

/* Captured strip for small screens (always visible when sidebars are hidden) */
.captured-strip{display:none;width:100%;gap:8px;margin-top:10px;align-items:center;justify-content:space-between}
.captured-strip .half{display:flex;align-items:center;gap:8px;flex-wrap:wrap}
.captured-strip .label{font-size:13px;opacity:0.85}
.badge{min-width:26px;height:26px;border-radius:13px;background:rgba(255,255,255,0.04);display:flex;align-items:center;justify-content:center;font-weight:700;padding:0 8px;font-size:13px}

@media (max-width:640px){
  .captured-strip{display:flex}
  .captured-strip .small-piece{width:34px;height:34px;padding:3px;border-radius:6px}
}

/* New: captured containers shown *separately* above and below board on small screens */
.captured-mobile { display:none; width:100%; gap:8px; margin:8px 0; align-items:center; justify-content:center; }
.captured-mobile .label { font-size:13px; opacity:0.9; margin-bottom:6px; text-align:center; }
.captured-mobile .row { display:flex; gap:6px; flex-wrap:wrap; justify-content:center; align-items:center; }
@media (max-width:640px){
  .captured-mobile { display:flex; flex-direction:column; }
  .captured-mobile .small-piece{ width:34px; height:34px; padding:3px; border-radius:6px }
  /* hide the horizontal captured-strip on very small screens (we use separate ones) */
  .captured-strip{ display:none !important; }
}

/* accessibility focus */
.piece:focus{outline:3px solid rgba(255,255,255,0.12)}

/* ------------------------------- */
/* Multiplayer UI specific styles  */
/* ------------------------------- */
.multiplayer{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
.multiplayer label{font-size:13px;opacity:0.95}

#your-id{min-width:140px;padding:8px 10px;border-radius:10px;background:rgba(255,255,255,0.02);border:1px dashed rgba(255,255,255,0.03);font-weight:700;letter-spacing:0.6px}
#copyIdBtn{padding:6px 8px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.04);font-size:13px}
#copyIdBtn:hover{transform:translateY(-1px)}

#peer-id-input{min-width:160px;padding:8px 10px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:rgba(0,0,0,0.12);color:inherit}
#peer-id-input::placeholder{opacity:0.6}

#connect-btn.primary{padding:8px 12px;border-radius:8px}
#disconnect-btn{padding:8px 12px;border-radius:8px;background:transparent;border:1px solid rgba(255,80,80,0.14);color:#ffb3b3}

#connStatus{font-size:13px;opacity:0.95;padding:6px 8px;border-radius:8px;background:rgba(255,255,255,0.01);border:1px solid rgba(255,255,255,0.02)}

/* subtle status variants */
#connStatus.connected{border-color:rgba(64,240,120,0.12);background:linear-gradient(90deg,rgba(64,240,120,0.04),rgba(255,255,255,0.01));color:#c8ffe0}
#connStatus.matching{border-color:rgba(80,160,255,0.12);background:linear-gradient(90deg,rgba(80,160,255,0.04),rgba(255,255,255,0.01));color:#dbe9ff}
#connStatus.error{border-color:rgba(255,90,90,0.12);background:linear-gradient(90deg,rgba(255,90,90,0.04),rgba(255,255,255,0.01));color:#ffdede}

/* Mobile adjustments */
@media (max-width:640px){
  .multiplayer{flex-direction:column;align-items:stretch;width:100%}
  .multiplayer > div{display:flex;gap:8px;align-items:center;justify-content:space-between}
  #peer-id-input{width:100%;min-width:0}
  #your-id{align-self:flex-start}
  #connStatus{width:100%;text-align:left}
}

/* Accessibility: visible focus */
#peer-id-input:focus,#connect-btn:focus,#copyIdBtn:focus{outline:3px solid rgba(255,127,140,0.12)}

/* small helpers for when we show/hide connect/disconnect */
.hidden{display:none !important}

/* keep existing color system for primary buttons */
button.primary:active{transform:translateY(1px)}
